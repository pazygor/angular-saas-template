<div class="forgot-password-container full-height flex align-items-center justify-content-center">
  <p-toast></p-toast>
  
  <div class="surface-card p-5 shadow-2 border-round w-full" style="max-width: 500px;">
    <div class="text-center mb-5">
      <i class="pi pi-lock text-6xl text-primary mb-3"></i>
      <h2 class="text-3xl font-semibold text-900 mb-2">Esqueceu a senha?</h2>
      <p class="text-600 m-0">Sem problemas! Digite seu email e enviaremos um link de redefinição.</p>
    </div>

    <!-- Formulário de recuperação -->
    <div *ngIf="!emailSent">
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
        <div class="field mb-4">
          <label for="email" class="block text-900 font-medium mb-2">Email</label>
          <input 
            type="email" 
            pInputText 
            id="email" 
            formControlName="email"
            placeholder="seu@email.com"
            class="w-full"
            [ngClass]="{'ng-invalid ng-dirty': email?.invalid && email?.touched}"
          />
          <small 
            class="text-red-500" 
            *ngIf="email?.invalid && email?.touched"
          >
            <span *ngIf="email?.errors?.['required']">Email é obrigatório</span>
            <span *ngIf="email?.errors?.['email']">Email inválido</span>
          </small>
        </div>

        <button 
          pButton 
          type="submit"
          label="Enviar Link de Redefinição" 
          icon="pi pi-send"
          class="w-full mb-3"
          [loading]="loading"
          [disabled]="loading"
        ></button>

        <button 
          pButton 
          type="button"
          label="Voltar ao Login" 
          icon="pi pi-arrow-left"
          class="w-full p-button-text"
          (click)="backToLogin()"
        ></button>
      </form>
    </div>

    <!-- Mensagem de confirmação -->
    <div *ngIf="emailSent" class="text-center">
      <div class="surface-100 border-round p-4 mb-4">
        <i class="pi pi-check-circle text-5xl text-green-500 mb-3"></i>
        <h3 class="text-xl text-900 mb-2">Email Enviado!</h3>
        <p class="text-600 m-0">
          Verifique sua caixa de entrada e siga as instruções para redefinir sua senha.
        </p>
      </div>

      <button 
        pButton 
        type="button"
        label="Voltar ao Login" 
        icon="pi pi-arrow-left"
        class="w-full"
        (click)="backToLogin()"
      ></button>
    </div>
  </div>
</div>
