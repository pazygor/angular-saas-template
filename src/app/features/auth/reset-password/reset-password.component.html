<div class="reset-password-container full-height flex align-items-center justify-content-center">
  <p-toast></p-toast>
  
  <div class="surface-card p-5 shadow-2 border-round w-full" style="max-width: 500px;">
    <div class="text-center mb-5">
      <i class="pi pi-key text-6xl text-primary mb-3"></i>
      <h2 class="text-3xl font-semibold text-900 mb-2">Redefinir Senha</h2>
      <p class="text-600 m-0">Digite sua nova senha abaixo.</p>
    </div>

    <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
      <!-- Campo Nova Senha -->
      <div class="field mb-4">
        <label for="password" class="block text-900 font-medium mb-2">Nova Senha</label>
        <p-password 
          id="password" 
          formControlName="password"
          placeholder="Digite sua nova senha"
          [toggleMask]="true"
          [feedback]="true"
          styleClass="w-full"
          inputStyleClass="w-full"
          [ngClass]="{'ng-invalid ng-dirty': password?.invalid && password?.touched}"
        ></p-password>
        <small 
          class="text-red-500" 
          *ngIf="password?.invalid && password?.touched"
        >
          <span *ngIf="password?.errors?.['required']">Senha é obrigatória</span>
          <span *ngIf="password?.errors?.['minlength']">Senha deve ter no mínimo 6 caracteres</span>
        </small>
      </div>

      <!-- Campo Confirmar Senha -->
      <div class="field mb-4">
        <label for="confirmPassword" class="block text-900 font-medium mb-2">Confirmar Nova Senha</label>
        <p-password 
          id="confirmPassword" 
          formControlName="confirmPassword"
          placeholder="Confirme sua nova senha"
          [toggleMask]="true"
          [feedback]="false"
          styleClass="w-full"
          inputStyleClass="w-full"
          [ngClass]="{'ng-invalid ng-dirty': (confirmPassword?.invalid || !passwordsMatch) && confirmPassword?.touched}"
        ></p-password>
        <small 
          class="text-red-500" 
          *ngIf="confirmPassword?.invalid && confirmPassword?.touched"
        >
          <span *ngIf="confirmPassword?.errors?.['required']">Confirmação de senha é obrigatória</span>
        </small>
        <small 
          class="text-red-500" 
          *ngIf="!passwordsMatch && confirmPassword?.touched && confirmPassword?.value"
        >
          As senhas não coincidem
        </small>
      </div>

      <button 
        pButton 
        type="submit"
        label="Redefinir Senha" 
        icon="pi pi-check"
        class="w-full mb-3"
        [loading]="loading"
        [disabled]="loading"
      ></button>

      <button 
        pButton 
        type="button"
        label="Voltar ao Login" 
        icon="pi pi-arrow-left"
        class="w-full p-button-text"
        (click)="backToLogin()"
      ></button>
    </form>
  </div>
</div>
